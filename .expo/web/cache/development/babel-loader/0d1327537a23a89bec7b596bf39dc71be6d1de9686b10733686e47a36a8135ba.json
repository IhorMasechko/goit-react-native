{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport db from \"../../firebase/config\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { authSlice } from \"./authReducer\";\nvar _authSlice$actions = authSlice.actions,\n  authSignOut = _authSlice$actions.authSignOut,\n  authStateChange = _authSlice$actions.authStateChange,\n  updateUserProfile = _authSlice$actions.updateUserProfile;\nvar auth = getAuth(db);\nexport var authSignUpUser = function authSignUpUser(_ref) {\n  var email = _ref.email,\n    password = _ref.password,\n    userName = _ref.userName;\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch, getState) {\n      try {\n        yield createUserWithEmailAndPassword(auth, email, password);\n        var user = yield auth.currentUser;\n        var _yield$auth$currentUs = yield auth.currentUser,\n          displayName = _yield$auth$currentUs.displayName,\n          uid = _yield$auth$currentUs.uid;\n        yield updateProfile(user, {\n          displayName: userName\n        });\n        dispatch(authSlice.actions.updateUserProfile({\n          userId: uid,\n          userName: userName\n        }));\n      } catch (error) {\n        console.log(\"error.message\", error.message);\n      }\n    });\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var authSignInUser = function authSignInUser(_ref3) {\n  var email = _ref3.email,\n    password = _ref3.password;\n  return function () {\n    var _ref4 = _asyncToGenerator(function* (dispatch, getState) {\n      try {\n        var user = yield signInWithEmailAndPassword(auth, email, password);\n      } catch (error) {\n        console.log(\"error\", error);\n        console.log(\"error.message\", error.message);\n      }\n    });\n    return function (_x3, _x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var authStateCahngeUser = function authStateCahngeUser() {\n  return function () {\n    var _ref5 = _asyncToGenerator(function* (dispatch, getState) {\n      try {\n        yield onAuthStateChanged(auth, function (user) {\n          if (user) {\n            var userUpdateProfile = {\n              userName: user.displayName,\n              userId: user.uid,\n              userEmail: user.email\n            };\n            dispatch(authStateChange({\n              stateChange: true\n            }));\n            dispatch(updateUserProfile(userUpdateProfile));\n          }\n        });\n      } catch (error) {\n        throw error;\n      }\n    });\n    return function (_x5, _x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var authSignOutUser = function authSignOutUser() {\n  return function () {\n    var _ref6 = _asyncToGenerator(function* (dispatch, getState) {\n      yield signOut(auth);\n      dispatch(authSignOut());\n    });\n    return function (_x7, _x8) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","onAuthStateChanged","signOut","authSlice","_authSlice$actions","actions","authSignOut","authStateChange","updateUserProfile","auth","authSignUpUser","_ref","email","password","userName","_ref2","_asyncToGenerator","dispatch","getState","user","currentUser","_yield$auth$currentUs","displayName","uid","userId","error","console","log","message","_x","_x2","apply","arguments","authSignInUser","_ref3","_ref4","_x3","_x4","authStateCahngeUser","_ref5","userUpdateProfile","userEmail","stateChange","_x5","_x6","authSignOutUser","_ref6","_x7","_x8"],"sources":["/Users/ihor.masechko/Documents/goit-react-native/redux/auth/authOperations.js"],"sourcesContent":["import db from \"../../firebase/config\";\n\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  onAuthStateChanged,\n  signOut,\n} from \"firebase/auth\";\n\nimport { authSlice } from \"./authReducer\";\n\nconst { authSignOut, authStateChange, updateUserProfile } = authSlice.actions;\n\nconst auth = getAuth(db);\n\nexport const authSignUpUser =\n  ({ email, password, userName }) =>\n  async (dispatch, getState) => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n\n      const user = await auth.currentUser;\n\n      const { displayName, uid } = await auth.currentUser;\n\n      await updateProfile(user, {\n        displayName: userName,\n      });\n\n      dispatch(\n        authSlice.actions.updateUserProfile({\n          userId: uid,\n          userName: userName,\n        })\n      );\n    } catch (error) {\n      console.log(\"error.message\", error.message);\n    }\n  };\n\nexport const authSignInUser =\n  ({ email, password }) =>\n  async (dispatch, getState) => {\n    try {\n      const user = await signInWithEmailAndPassword(auth, email, password);\n      // console.log(\"user SignInUser\", user);\n    } catch (error) {\n      console.log(\"error\", error);\n      console.log(\"error.message\", error.message);\n    }\n  };\n\nexport const authStateCahngeUser = () => async (dispatch, getState) => {\n  try {\n    await onAuthStateChanged(auth, (user) => {\n      // console.log(user);\n      if (user) {\n        const userUpdateProfile = {\n          userName: user.displayName,\n          userId: user.uid,\n          userEmail: user.email,\n        };\n\n        dispatch(authStateChange({ stateChange: true }));\n        dispatch(updateUserProfile(userUpdateProfile));\n      }\n    });\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport const authSignOutUser = () => async (dispatch, getState) => {\n  await signOut(auth);\n  dispatch(authSignOut());\n};\n"],"mappings":";AAAA,OAAOA,EAAE;AAET,SACEC,OAAO,EACPC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,aAAa,EACbC,kBAAkB,EAClBC,OAAO,QACF,eAAe;AAEtB,SAASC,SAAS;AAElB,IAAAC,kBAAA,GAA4DD,SAAS,CAACE,OAAO;EAArEC,WAAW,GAAAF,kBAAA,CAAXE,WAAW;EAAEC,eAAe,GAAAH,kBAAA,CAAfG,eAAe;EAAEC,iBAAiB,GAAAJ,kBAAA,CAAjBI,iBAAiB;AAEvD,IAAMC,IAAI,GAAGZ,OAAO,CAACD,EAAE,CAAC;AAExB,OAAO,IAAMc,cAAc,GACzB,SADWA,cAAcA,CAAAC,IAAA;EAAA,IACtBC,KAAK,GAAAD,IAAA,CAALC,KAAK;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IAAEC,QAAQ,GAAAH,IAAA,CAARG,QAAQ;EAAA;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAC5B,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MAC5B,IAAI;QACF,MAAMpB,8BAA8B,CAACW,IAAI,EAAEG,KAAK,EAAEC,QAAQ,CAAC;QAE3D,IAAMM,IAAI,SAASV,IAAI,CAACW,WAAW;QAEnC,IAAAC,qBAAA,SAAmCZ,IAAI,CAACW,WAAW;UAA3CE,WAAW,GAAAD,qBAAA,CAAXC,WAAW;UAAEC,GAAG,GAAAF,qBAAA,CAAHE,GAAG;QAExB,MAAMvB,aAAa,CAACmB,IAAI,EAAE;UACxBG,WAAW,EAAER;QACf,CAAC,CAAC;QAEFG,QAAQ,CACNd,SAAS,CAACE,OAAO,CAACG,iBAAiB,CAAC;UAClCgB,MAAM,EAAED,GAAG;UACXT,QAAQ,EAAEA;QACZ,CAAC,CAAC,CACH;MACH,CAAC,CAAC,OAAOW,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,KAAK,CAACG,OAAO,CAAC;MAC7C;IACF,CAAC;IAAA,iBAAAC,EAAA,EAAAC,GAAA;MAAA,OAAAf,KAAA,CAAAgB,KAAA,OAAAC,SAAA;IAAA;EAAA;AAAA;AAEH,OAAO,IAAMC,cAAc,GACzB,SADWA,cAAcA,CAAAC,KAAA;EAAA,IACtBtB,KAAK,GAAAsB,KAAA,CAALtB,KAAK;IAAEC,QAAQ,GAAAqB,KAAA,CAARrB,QAAQ;EAAA;IAAA,IAAAsB,KAAA,GAAAnB,iBAAA,CAClB,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MAC5B,IAAI;QACF,IAAMC,IAAI,SAASpB,0BAA0B,CAACU,IAAI,EAAEG,KAAK,EAAEC,QAAQ,CAAC;MAEtE,CAAC,CAAC,OAAOY,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC;QAC3BC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,KAAK,CAACG,OAAO,CAAC;MAC7C;IACF,CAAC;IAAA,iBAAAQ,GAAA,EAAAC,GAAA;MAAA,OAAAF,KAAA,CAAAJ,KAAA,OAAAC,SAAA;IAAA;EAAA;AAAA;AAEH,OAAO,IAAMM,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA;EAAA;IAAA,IAAAC,KAAA,GAAAvB,iBAAA,CAAS,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MACrE,IAAI;QACF,MAAMjB,kBAAkB,CAACQ,IAAI,EAAE,UAACU,IAAI,EAAK;UAEvC,IAAIA,IAAI,EAAE;YACR,IAAMqB,iBAAiB,GAAG;cACxB1B,QAAQ,EAAEK,IAAI,CAACG,WAAW;cAC1BE,MAAM,EAAEL,IAAI,CAACI,GAAG;cAChBkB,SAAS,EAAEtB,IAAI,CAACP;YAClB,CAAC;YAEDK,QAAQ,CAACV,eAAe,CAAC;cAAEmC,WAAW,EAAE;YAAK,CAAC,CAAC,CAAC;YAChDzB,QAAQ,CAACT,iBAAiB,CAACgC,iBAAiB,CAAC,CAAC;UAChD;QACF,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOf,KAAK,EAAE;QACd,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,iBAAAkB,GAAA,EAAAC,GAAA;MAAA,OAAAL,KAAA,CAAAR,KAAA,OAAAC,SAAA;IAAA;EAAA;AAAA;AAED,OAAO,IAAMa,eAAe,GAAG,SAAlBA,eAAeA,CAAA;EAAA;IAAA,IAAAC,KAAA,GAAA9B,iBAAA,CAAS,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MACjE,MAAMhB,OAAO,CAACO,IAAI,CAAC;MACnBQ,QAAQ,CAACX,WAAW,EAAE,CAAC;IACzB,CAAC;IAAA,iBAAAyC,GAAA,EAAAC,GAAA;MAAA,OAAAF,KAAA,CAAAf,KAAA,OAAAC,SAAA;IAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}